/*****************************************************************
* Copyright (C) 2019 60Plus Technology Co.,Ltd.*
******************************************************************
* lowPower.c
*
* DESCRIPTION:
*     Lora low power
* AUTHOR:
*     Ziming
* CREATED DATE:
*     2019/4/13
* REVISION:
*     v0.1
*
* MODIFICATION HISTORY
* --------------------
* $Log:$
* <author>  <time>      <version >  <desc>
* Ziming      2019/4/13   v0.1        Created this file.
*
*****************************************************************/
 
/*************************************************************************************************************************
 *                                                       INCLUDES                                                        *
 *************************************************************************************************************************/
#include "loraConfig.h"
#include "loraConfigLP.h"
/*************************************************************************************************************************
 *                                                        MACROS                                                         *
 *************************************************************************************************************************/
 
/*************************************************************************************************************************
 *                                                      CONSTANTS                                                        *
 *************************************************************************************************************************/
 
/*************************************************************************************************************************
 *                                                       TYPEDEFS                                                        *
 *************************************************************************************************************************/
 
/*************************************************************************************************************************
 *                                                   GLOBAL VARIABLES                                                    *
 *************************************************************************************************************************/
 
/*************************************************************************************************************************
 *                                                  EXTERNAL VARIABLES                                                   *
 *************************************************************************************************************************/
 
/*************************************************************************************************************************
 *                                                    LOCAL VARIABLES                                                    *
 *************************************************************************************************************************/
 
/*************************************************************************************************************************
 *                                                 FUNCTION DECLARATIONS                                                 *
 *************************************************************************************************************************/
extern void SystemClock_Config(void);
/*************************************************************************************************************************
 *                                                   PUBLIC FUNCTIONS                                                    *
 *************************************************************************************************************************/
 
/*************************************************************************************************************************
 *                                                    LOCAL FUNCTIONS                                                    *
 *************************************************************************************************************************/
/*****************************************************************
* DESCRIPTION: sysEnterLowPower
*     
* INPUTS:
*     
* OUTPUTS:
*     
* NOTE:
*     null
*****************************************************************/
void sysEnterLowPower( uint32_t *a_xModifiableIdleTime)
{
    /* Get sleep time */
    //prvGetExpectedIdleTime();
    *a_xModifiableIdleTime = 0;
    HAL_PWR_EnterSTOPMode(PWR_LOWPOWERREGULATOR_ON, PWR_SLEEPENTRY_WFI);//PWR_STOPENTRY_WFE); 
    //HAL_PWR_EnterSTANDBYMode();
}

/*****************************************************************
* DESCRIPTION: sysExitLowPower
*     
* INPUTS:
*     
* OUTPUTS:
*     
* NOTE:
*     null
*****************************************************************/
void sysExitLowPower( uint32_t *a_xExpectedIdleTime )
{
    //(void)*a_xExpectedIdleTime;
    //SystemClock_Config();
}

/****************************************************** END OF FILE ******************************************************/
